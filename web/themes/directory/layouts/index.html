<!doctype html>
<html>
    <head>
        {{ partial "head.html" . }}
    </head>
    <body>
        {{ partial "header.html" . }}

        <div class="site-title">
            <p>Welcome to BlogScroll! ðŸ‘‹</p>
            <p>This is an open directory of personal sites and blogs, maintained entirely <a class="blog-link" href="https://github.com/blogscroll/blogscroll">on GitHub</a>.</p>
            <p>This project was created by <a href="https://den.dev" class="blog-link">Den Delimarsky</a> in an effort to bring attention to little ðŸŒ± digital gardens and âœ¨ personal corners of the internet that people maintain outside the "Big Tech" walled gardens. We're all better off maintaining homegrown corners of the Internet.</p>
            <p>If you prefer not to use GitHub to make your contribution, you can also send me a note to <kbd>hi@den.dev</kbd> and I will happily review and publish it.</p>
            <p>You can also subscribe to the <a class="blog-link" href="/index.xml">RSS feed</a> to stay up-to-date on the latest additions.</p>
        </div>

        <div class="link-container" id="link-container">
        {{ range .Site.Data }}
            {{ range $fileKey, $fileData := . }}
                <div class="category-container">
                    <h3>{{ $fileKey }}</h3>
                    
                    {{ $totalBlogs := 0 }}
                    {{ range $categoryKey, $categoryData := $fileData }}
                        {{ if isset $categoryData "blogs" }}
                            {{ $totalBlogs = add $totalBlogs (len $categoryData.blogs) }}
                        {{ end }}
                    {{ end }}

                    <h4><strong>{{ $totalBlogs }}</strong> Entries</h4>

                    {{ range $categoryKey, $categoryData := $fileData }}
                        {{ if isset $categoryData "blogs" }}
                            {{ $sortedBlogs := sort $categoryData.blogs "title" }}
                            {{ range $sortedBlogs }}
                                <div class="blog-item">
                                    {{ if .favicon }}
                                        <img class="blog-icon" src="{{ .favicon }}" decoding="async" />
                                    {{ end }}
                                    <p><a class="blog-link" href="{{ .url }}">{{ .title | htmlEscape }}</a></p>
                                </div>
                            {{ end }}
                        {{ end }}
                    {{ end }}
                </div>
            {{ end }}
        {{ end }}
        </div>
    </body>
</html>
